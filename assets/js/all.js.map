{"version":3,"sources":["all.js"],"names":["api_path","token","baseUrl","adminOrder_path","tokenObj","headers","changeChartBtnDiv","document","querySelector","chartSection","orderList","orderTable","popUpDiv","orderData","addEventListener","changeChart","doubleCheckMsg","init","getOrderData","axios","get","then","res","data","orders","renderOrderList","renderChart","err","errData","response","status","console","log","message","loadingAnimation","setAttribute","msg","length","str","forEach","item","listStr","products","title","date","Date","createdAt","toLocaleDateString","id","user","name","tel","address","email","paid","innerHTML","deleteOrder","btnProp","changePaid","obj","put","productTitleTemporaryAry","categoryChartData","filterChartData","sort","a","b","revenue","productTitleChartData","otherObj","label","index","push","toC3PieChartFormat","colorData","productTitleColors","categoryColors","productCategoryChart","c3","generate","bindto","columns","type","colors","size","height","width","productTitleChart","ary","key","outputData","totalPrice","price","quantity","aryCheck","some","chartFormatData","e","btnStatus","target","getAttribute","nodeName","chartName","chartDivs","querySelectorAll","btns","preventDefault","targetJs","dataset","js","popUpMsg","orderId","filter","productStr","total","prop","Object","is","dblcheckbtn","isPaid","once"],"mappings":"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","file":"all.js","sourcesContent":["// 後台\n// API\nconst api_path = 'calon';\nconst token = 'zqvqaKYuHkZmVjBBRE9EepP5KF13';\nconst baseUrl = 'https://livejs-api.hexschool.io';\nconst adminOrder_path = `api/livejs/v1/admin/${api_path}/orders`;\nconst tokenObj = {\n  headers: {\n    'Authorization': token\n  }\n};\n\n// DOM\nconst changeChartBtnDiv = document.querySelector('[data-js=\"changeChartBtnDiv\"]');\nconst chartSection = document.querySelector('.productChart');\nconst orderList = document.querySelector('[data-js=\"orderList\"]');\nconst orderTable = document.querySelector('.orderTable');\nconst popUpDiv = document.querySelector('[data-js=\"popUpDiv\"]');\n\n// data\nlet orderData = [];\n\n// event\nchangeChartBtnDiv.addEventListener('click', changeChart);\norderTable.addEventListener('click', doubleCheckMsg);\n\ninit();\n\nfunction init() {\n  getOrderData();\n};\n\nfunction getOrderData() {\n  axios.get(`${baseUrl}/${adminOrder_path}`, tokenObj).then(res => {\n    orderData = res.data.orders;\n    renderOrderList();\n    renderChart();\n  }).catch(err => {\n    let errData = err.response.data;\n    if (!errData.status) {\n      console.log(errData.message);\n    };\n  }).then(() => {\n    const loadingAnimation = document.querySelector('[data-loading]');\n    loadingAnimation.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction renderOrderList() {\n  const msg = document.querySelector('p[data-hasOrder]');\n  if (orderData.length === 0) {\n    msg.setAttribute('data-hasOrder', 'show');\n    orderTable.setAttribute('data-hasOrder', 'hidden');\n    chartSection.setAttribute('data-hasOrder', 'hidden');\n  } else {\n    msg.setAttribute('data-hasOrder', 'hidden');\n    orderTable.setAttribute('data-hasOrder', 'show');\n    chartSection.setAttribute('data-hasOrder', 'show');\n\n    let str = '';\n    orderData.forEach(item => {\n      let listStr = ''\n      item.products.forEach(function (item) {\n        listStr += `<li>${item.title}</li>`\n      });\n      let date = new Date(item.createdAt * 1000).toLocaleDateString();\n      str += `\n        <tr class=\"border-b\">\n          <td class=\"p-1.5 border-r\">${item.id}</td>\n          <td class=\"p-1.5 border-r\">\n            <ul>\n              <li>${item.user.name}</li>\n              <li>${item.user.tel}</li>\n            </ul>\n          </td>\n          <td class=\"p-1.5 border-r\">${item.user.address}</td>\n          <td class=\"p-1.5 border-r\">${item.user.email}</td>\n          <td class=\"p-1.5 border-r\">\n            <ul>${listStr}</ul>\n          </td>\n          <td class=\"p-1.5 border-r text-center\">${date}</td>\n          <td class=\"p-1.5 border-r text-center\">\n            <a class=\"text-info underline\" href=\"#\" data-id=\"${item.id}\" data-js=\"paidBtn\">${item.paid ? '已處理' : '未處理'}</a>\n          </td>\n          <td class=\"p-1.5 text-center\">\n            <button class=\"text-white bg-danger hover:opacity-70 rounded py-1.5 px-2.5\" data-js=\"deleteOrderBtn\" data-id=\"${item.id}\">刪除</button>\n          </td>\n        </tr>\n    `\n    });\n    orderList.innerHTML = str;\n  };\n};\n\nfunction deleteOrder(id, btnProp) {\n  if (btnProp === 'deleteAll') {\n    axios.delete(`${baseUrl}/${adminOrder_path}`, tokenObj).then(res => {\n      orderData = res.data.orders;\n      renderOrderList();\n    }).catch(err => {\n      let errData = err.response.data;\n      if (!errData.status) {\n        console.log(errData.message);\n      };\n    }).then(() => {\n      popUpDiv.setAttribute('data-popUp', 'hidden');\n    });\n  } else if (btnProp === 'deleteOne') {\n    axios.delete(`${baseUrl}/${adminOrder_path}/${id}`, tokenObj).then(res => {\n      orderData = res.data.orders;\n      renderOrderList();\n    }).catch(err => {\n      let errData = err.response.data;\n      if (!errData.status) {\n        console.log(errData.message);\n      };\n    }).then(() => {\n      popUpDiv.setAttribute('data-popUp', 'hidden');\n    });\n  };\n};\n\nfunction changePaid(id, status) {\n  let obj = {\n    \"data\": {\n      \"id\": id,\n      \"paid\": !status\n    }\n  };\n  axios.put(`${baseUrl}/${adminOrder_path}`, obj, tokenObj).then(res => {\n    orderData = res.data.orders;\n    renderOrderList();\n  }).catch(err => {\n    let errData = err.response.data;\n    if (!errData.status) {\n      console.log(errData.message);\n    };\n  }).then(() => {\n    popUpDiv.setAttribute('data-popUp', 'hidden');\n  });\n};\n\nfunction renderChart() {\n  let productTitleTemporaryAry = [];\n  let categoryChartData = [];\n\n  orderData.forEach(item => {\n    filterChartData(item.products, 'category', categoryChartData);\n    filterChartData(item.products, 'title', productTitleTemporaryAry);\n  });\n\n  // 處理 全品項營收比重 資料 \n  // 從大排到小\n  productTitleTemporaryAry = productTitleTemporaryAry.sort((a, b) => b.revenue - a.revenue);\n\n  let productTitleChartData = [];\n  // 收入排名四（含）之後的資料都算入「其他」\n  let otherObj = {\n    label: '其他',\n    revenue: 0\n  };\n  productTitleTemporaryAry.forEach((item, index) => {\n    if (index < 3) {\n      productTitleChartData.push(item);\n    } else {\n      otherObj.revenue += item.revenue;\n    };\n  });\n  if (productTitleTemporaryAry.length >= 3) {\n    productTitleChartData.push(otherObj);\n  };\n\n  categoryChartData = toC3PieChartFormat(categoryChartData);\n  productTitleChartData = toC3PieChartFormat(productTitleChartData);\n\n  // 根據順序上圖表顏色\n  productTitleChartData = productTitleChartData.sort((a, b) => b[1] - a[1]);\n\n  const colorData = ['#301E5F', '#5434A7', '#9D7FEA', '#DACBFF'];\n  let productTitleColors = {};\n  let categoryColors = {};\n  categoryChartData.forEach((item, index) => {\n    categoryColors[item[0]] = colorData[index + 1];\n  });\n  productTitleChartData.forEach((item, index) => {\n    productTitleColors[item[0]] = colorData[index];\n  });\n\n  const productCategoryChart = c3.generate({\n    bindto: '#categoryRevenueChart',\n    data: {\n      columns: categoryChartData,\n      type: 'pie',\n      colors: categoryColors\n    },\n    size: {\n      height: 400,\n      width: 400\n    },\n  });\n\n  const productTitleChart = c3.generate({\n    bindto: '#productRevenueChart',\n    data: {\n      columns: productTitleChartData,\n      type: 'pie',\n      colors: productTitleColors\n    },\n    size: {\n      height: 400,\n      width: 400\n    },\n  });\n};\n\nfunction filterChartData(ary, key, outputData) {\n  ary.forEach(item => {\n    const label = item[key];\n    const totalPrice = item.price * item.quantity;\n    const aryCheck = outputData.some(item => item.label === label);\n    if (outputData.length === 0 || !aryCheck) {\n      let obj = {};\n      obj.label = label;\n      obj.revenue = totalPrice;\n      outputData.push(obj)\n    } else {\n      outputData.forEach(item => {\n        item.revenue += totalPrice;\n      });\n    };\n  });\n};\n\n\n// 整理成 C3.js Pie 格式 [['label_1', 數量], ['label_2', 數量], ....]\nfunction toC3PieChartFormat(data) {\n  // 由大排到小，chart 顏色要用\n  data = data.sort((a, b) => b.revenue - a.revenue);\n  let chartFormatData = [];\n  data.forEach(item => {\n    let ary = [];\n    ary.push(item.label, item.revenue);\n    chartFormatData.push(ary);\n  });\n  return chartFormatData;\n};\n\nfunction changeChart(e) {\n  const btnStatus = e.target.getAttribute('data-chartBtn');\n  if (e.target.nodeName !== 'BUTTON' || btnStatus === 'active') { return };\n\n  const chartName = e.target.getAttribute('data-chartName');\n  const chartDivs = document.querySelectorAll('[data-chart]');\n  const btns = document.querySelectorAll('[data-js=\"chartBtn\"]');\n\n  btns.forEach(item => {\n    if (item.getAttribute('data-chartName') === chartName) {\n      item.setAttribute('data-chartBtn', 'active');\n    } else {\n      item.setAttribute('data-chartBtn', 'default');\n    }\n  });\n\n  chartDivs.forEach(item => {\n    if (item.getAttribute('data-js') === chartName) {\n      item.setAttribute('data-chart', 'show');\n    } else {\n      item.setAttribute('data-chart', 'hidden');\n    }\n  });\n};\n\nfunction doubleCheckMsg(e) {\n  e.preventDefault();\n  let targetJs = e.target.dataset.js;\n  if (targetJs !== 'deleteOrderBtn' && targetJs !== 'deleteAllOrderBtn' && targetJs !== 'paidBtn') { return };\n\n  const popUpMsg = document.querySelector('[data-js=\"popUpMsg\"]');\n  let orderId;\n  let target;\n  let str = '';\n  popUpDiv.setAttribute('data-popUp', 'show');\n\n  if (targetJs == 'deleteAllOrderBtn') {\n    str += `\n      <div class=\"popUp-body pr-16 mb-2\">\n      <p class=\"text-lg pb-1.5\">確定要刪除<strong>全部訂單</strong>嗎？</p>\n      </div>\n      <div class=\"popUp-footer flex justify-end\">\n      <button class=\"mr-2 py-2 px-3 bg-gray-400 text-white rounded hover:opacity-75\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"false\">取消</button>\n      <button class=\"py-2 px-3 bg-danger text-white rounded hover:opacity-75\" data-prop=\"deleteAll\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"true\">刪除</button>\n      </div>\n      `;\n  } else {\n    orderId = e.target.dataset.id;\n    target = orderData.filter(item => item.id == orderId);\n    target = target[0];\n    let productStr = '';\n    target.products.forEach(item => {\n      productStr += `<li>${item.title}</li>`;\n    });\n\n    if (targetJs == 'deleteOrderBtn') {\n      str += `\n        <div class=\"popUp-body p-4 border-b\">\n          <p class=\"text-lg pb-1.5\">確定要刪除以下訂單嗎？</p>\n          <hr>\n          <ul class=\"mt-4\"}>\n            <li>訂單編號：${target.id}</li>\n            <li>顧客姓名：${target.user.name}</li>\n            <li>\n              購買產品：\n              <ul class=\"list-disc ml-8\">${productStr}</ul>\n            </li>\n            <li>總金額：${target.total}\n        </div>\n        <div class=\"popUp-footer flex justify-end py-4\">\n          <button class=\"mr-2 py-2 px-3 bg-gray-400 text-white rounded hover:opacity-75\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"false\">取消</button>\n          <button class=\"py-2 px-3 bg-danger text-white rounded hover:opacity-75\" data-prop=\"deleteOne\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"true\">刪除</button>\n        </div>\n      `;\n    } else if (targetJs === 'paidBtn') {\n      str += `\n        <div class=\"popUp-body p-4 border-b\">\n          <p class=\"text-lg pb-1.5\">\n            確定要將以下訂單的狀態從 <span class=\"text-info underline\">${target.paid ? '已處理' : '未處理'}</span> 更改為 \n            <span class=\"text-info underline\">${target.paid ? '未處理' : '已處理'}</span> 嗎？\n          </p>\n          <hr>\n          <ul class=\"mt-4\"}>\n            <li>訂單編號：${target.id}</li>\n            <li>顧客姓名：${target.user.name}</li>\n            <li>\n              購買產品：\n              <ul class=\"list-disc ml-8\">${productStr}</ul>\n            </li>\n            <li>總金額：${target.total}\n        </div>\n        <div class=\"popUp-footer flex justify-end py-4\">\n          <button class=\"mr-2 py-2 px-3 bg-gray-400 text-white rounded hover:opacity-75\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"false\">取消</button>\n          <button class=\"py-2 px-3 bg-danger text-white rounded hover:opacity-75\" data-prop=\"changePaid\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"true\">確定</button>\n        </div>\n      `;\n    };\n  };\n  popUpMsg.innerHTML = str;\n  popUpDiv.addEventListener('click', e => {\n    let targetJs = e.target.dataset.js;\n    let btnProp = e.target.dataset.prop;\n    if (targetJs !== 'popUpDiv' && targetJs !== 'dblCheckBtn') {\n      return;\n    } else if (Object.is(popUpDiv, e.target) || e.target.dataset.dblcheckbtn === 'false') {\n      popUpDiv.setAttribute('data-popUp', 'hidden');\n    } else if (btnProp === 'changePaid') {\n      let isPaid = target.paid;\n      changePaid(orderId, isPaid);\n    } else if (btnProp === 'deleteOne' || btnProp === 'deleteAll') {\n      deleteOrder(orderId, btnProp);\n    };\n  }, { once: true });\n};\n"]}