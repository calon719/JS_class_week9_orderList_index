{"version":3,"sources":["all.js"],"names":["api_path","token","baseUrl","adminOrder_path","tokenObj","headers","orderList","document","querySelector","orderTable","popUpDiv","chartEl","orderData","addEventListener","doubleCheckMsg","init","getOrderData","axios","get","then","res","data","orders","renderOrderList","err","errData","response","status","console","log","message","loadingAnimation","setAttribute","msg","length","str","forEach","item","listStr","products","title","date","Date","createdAt","toLocaleDateString","id","user","name","tel","address","email","paid","innerHTML","renderChart","deleteOrder","btnProp","changePaid","obj","put","ary","totalPrice","price","quantity","aryCheck","some","product","revenue","push","newAry","sort","a","b","otherObj","chartData","index","chartAry","colorData","colorObj","chart","c3","generate","bindto","columns","type","colors","size","height","width","e","preventDefault","targetJs","target","dataset","js","popUpMsg","orderId","filter","productStr","total","prop","Object","is","dblcheckbtn","isPaid"],"mappings":"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","file":"all.js","sourcesContent":["// 後台\n// API\nconst api_path = 'calon';\nconst token = 'zqvqaKYuHkZmVjBBRE9EepP5KF13';\nconst baseUrl = 'https://livejs-api.hexschool.io';\nconst adminOrder_path = `api/livejs/v1/admin/${api_path}/orders`;\nconst tokenObj = {\n  headers: {\n    'Authorization': token\n  }\n};\n\n// DOM\nconst orderList = document.querySelector('[data-js=\"orderList\"]');\nconst orderTable = document.querySelector('.orderTable');\nconst popUpDiv = document.querySelector('[data-js=\"popUpDiv\"]');\nconst chartEl = document.querySelector('#productRevenue');\n\n// data\nlet orderData;\n\n// event\norderTable.addEventListener('click', doubleCheckMsg);\n\ninit();\n\nfunction init() {\n  getOrderData();\n};\n\nfunction getOrderData() {\n  axios.get(`${baseUrl}/${adminOrder_path}`, tokenObj).then(function (res) {\n    orderData = res.data.orders;\n    renderOrderList();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (!errData.status) {\n      console.log(errData.message);\n    };\n  }).then(function () {\n    const loadingAnimation = document.querySelector('[data-loading]');\n    loadingAnimation.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction renderOrderList() {\n  const msg = document.querySelector('p[data-hasOrder]');\n  if (orderData.length === 0) {\n    msg.setAttribute('data-hasOrder', 'show');\n    orderTable.setAttribute('data-hasOrder', 'hidden');\n    chartEl.setAttribute('data-hasOrder', 'hidden');\n  } else {\n    msg.setAttribute('data-hasOrder', 'hidden');\n    orderTable.setAttribute('data-hasOrder', 'show');\n    chartEl.setAttribute('data-hasOrder', 'show');\n\n    let str = '';\n    orderData.forEach(function (item) {\n      let listStr = ''\n      item.products.forEach(function (item) {\n        listStr += `<li>${item.title}</li>`\n      });\n      let date = new Date(item.createdAt * 1000).toLocaleDateString();\n      str += `\n        <tr class=\"border-b\">\n          <td class=\"p-1.5 border-r\">${item.id}</td>\n          <td class=\"p-1.5 border-r\">\n            <ul>\n              <li>${item.user.name}</li>\n              <li>${item.user.tel}</li>\n            </ul>\n          </td>\n          <td class=\"p-1.5 border-r\">${item.user.address}</td>\n          <td class=\"p-1.5 border-r\">${item.user.email}</td>\n          <td class=\"p-1.5 border-r\">\n            <ul>${listStr}</ul>\n          </td>\n          <td class=\"p-1.5 border-r text-center\">${date}</td>\n          <td class=\"p-1.5 border-r text-center\">\n            <a class=\"text-info underline\" href=\"#\" data-id=\"${item.id}\" data-js=\"paidBtn\">${item.paid ? '已處理' : '未處理'}</a>\n          </td>\n          <td class=\"p-1.5 text-center\">\n            <button class=\"text-white bg-danger hover:opacity-70 rounded py-1.5 px-2.5\" data-js=\"deleteOrderBtn\" data-id=\"${item.id}\">刪除</button>\n          </td>\n        </tr>\n    `\n    });\n    orderList.innerHTML = str;\n    renderChart();\n  };\n};\n\nfunction deleteOrder(id, btnProp) {\n  if (btnProp === 'deleteAll') {\n    axios.delete(`${baseUrl}/${adminOrder_path}`, tokenObj).then(function (res) {\n      getOrderData();\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (!errData.status) {\n        console.log(errData.message);\n      };\n    }).then(function () {\n      popUpDiv.setAttribute('data-popUp', 'hidden');\n    });\n  } else if (btnProp === 'deleteOne') {\n    axios.delete(`${baseUrl}/${adminOrder_path}/${id}`, tokenObj).then(function (res) {\n      getOrderData();\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (!errData.status) {\n        console.log(errData.message);\n      };\n    }).then(function () {\n      popUpDiv.setAttribute('data-popUp', 'hidden');\n    });\n  };\n};\n\nfunction changePaid(id, status) {\n  let obj = {\n    \"data\": {\n      \"id\": id,\n      \"paid\": !status\n    }\n  };\n  axios.put(`${baseUrl}/${adminOrder_path}`, obj, tokenObj).then(function (res) {\n    getOrderData();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (!errData.status) {\n      console.log(errData.message);\n    };\n  }).then(function () {\n    popUpDiv.setAttribute('data-popUp', 'hidden');\n  });\n};\n\nfunction renderChart() {\n  let ary = [];\n\n  orderData.forEach(function (item) {\n    item.products.forEach(function (item) {\n      let title = item.title;\n      let totalPrice = item.price * item.quantity;\n      let aryCheck = ary.some(function (product) { return product.title == title });\n\n      if (ary.length === 0 || !aryCheck) {\n        let obj = {};\n        obj.title = title;\n        obj.revenue = totalPrice;\n        ary.push(obj);\n      } else {\n        ary.forEach(function (item) {\n          if (item.title === title) {\n            item.revenue += totalPrice;\n          };\n        });\n      };\n    });\n  });\n\n  let newAry = ary.sort(function (a, b) { return b.revenue - a.revenue });\n\n  let otherObj = {\n    title: '其他',\n    revenue: 0\n  };\n\n\n  let chartData = [];\n  newAry.forEach(function (item, index) {\n    let chartAry = [];\n    if (index < 3) {\n      chartAry.push(item.title, item.revenue);\n      chartData.push(chartAry);\n    } else {\n      otherObj.revenue += item.revenue;\n    };\n  });\n\n  chartData.push([otherObj.title, otherObj.revenue]);\n\n  // 根據順序上圖表顏色\n  chartData = chartData.sort(function (a, b) { return b[1] - a[1] });\n\n  const colorData = ['#301E5F', '#5434A7', '#9D7FEA', '#DACBFF'];\n  let colorObj = {};\n  chartData.forEach(function (item, index) {\n    colorObj[item[0]] = colorData[index];\n  });\n\n  let chart = c3.generate({\n    bindto: '#productRevenue',\n    data: {\n      columns: chartData,\n      type: 'pie',\n      colors: colorObj\n    },\n    size: {\n      height: 400,\n      width: 400\n    },\n  });\n};\n\nfunction doubleCheckMsg(e) {\n  e.preventDefault();\n  let targetJs = e.target.dataset.js;\n  if (targetJs !== 'deleteOrderBtn' && targetJs !== 'deleteAllOrderBtn' && targetJs !== 'paidBtn') { return };\n\n  const popUpMsg = document.querySelector('[data-js=\"popUpMsg\"]');\n  let orderId;\n  let target;\n  let str = '';\n  popUpDiv.setAttribute('data-popUp', 'show');\n\n  if (targetJs == 'deleteAllOrderBtn') {\n    str += `\n      <div class=\"popUp-body pr-16 mb-2\">\n      <p class=\"text-lg pb-1.5\">確定要刪除<strong>全部訂單</strong>嗎？</p>\n      </div>\n      <div class=\"popUp-footer flex justify-end\">\n      <button class=\"mr-2 py-2 px-3 bg-gray-400 text-white rounded hover:opacity-75\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"false\">取消</button>\n      <button class=\"py-2 px-3 bg-danger text-white rounded hover:opacity-75\" data-prop=\"deleteAll\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"true\">刪除</button>\n      </div>\n      `;\n  } else {\n    orderId = e.target.dataset.id;\n    target = orderData.filter(function (item) { return item.id == orderId });\n    target = target[0];\n    let productStr = '';\n    target.products.forEach(function (item) {\n      productStr += `<li>${item.title}</li>`;\n    });\n\n    if (targetJs == 'deleteOrderBtn') {\n      str += `\n        <div class=\"popUp-body p-4 border-b\">\n          <p class=\"text-lg pb-1.5\">確定要刪除以下訂單嗎？</p>\n          <hr>\n          <ul class=\"mt-4\"}>\n            <li>訂單編號：${target.id}</li>\n            <li>顧客姓名：${target.user.name}</li>\n            <li>\n              購買產品：\n              <ul class=\"list-disc ml-8\">${productStr}</ul>\n            </li>\n            <li>總金額：${target.total}\n        </div>\n        <div class=\"popUp-footer flex justify-end py-4\">\n          <button class=\"mr-2 py-2 px-3 bg-gray-400 text-white rounded hover:opacity-75\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"false\">取消</button>\n          <button class=\"py-2 px-3 bg-danger text-white rounded hover:opacity-75\" data-prop=\"deleteOne\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"true\">刪除</button>\n        </div>\n      `;\n    } else if (targetJs === 'paidBtn') {\n      str += `\n        <div class=\"popUp-body p-4 border-b\">\n          <p class=\"text-lg pb-1.5\">\n            確定要將以下訂單的狀態從 <span class=\"text-info underline\">${target.paid ? '已處理' : '未處理'}</span> 更改為 \n            <span class=\"text-info underline\">${target.paid ? '未處理' : '已處理'}</span> 嗎？\n          </p>\n          <hr>\n          <ul class=\"mt-4\"}>\n            <li>訂單編號：${target.id}</li>\n            <li>顧客姓名：${target.user.name}</li>\n            <li>\n              購買產品：\n              <ul class=\"list-disc ml-8\">${productStr}</ul>\n            </li>\n            <li>總金額：${target.total}\n        </div>\n        <div class=\"popUp-footer flex justify-end py-4\">\n          <button class=\"mr-2 py-2 px-3 bg-gray-400 text-white rounded hover:opacity-75\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"false\">取消</button>\n          <button class=\"py-2 px-3 bg-danger text-white rounded hover:opacity-75\" data-prop=\"changePaid\" data-js=\"dblCheckBtn\" data-dblCheckBtn=\"true\">確定</button>\n        </div>\n      `;\n    };\n  };\n  popUpMsg.innerHTML = str;\n  popUpDiv.addEventListener('click', function (e) {\n    let targetJs = e.target.dataset.js;\n    let btnProp = e.target.dataset.prop;\n    if (targetJs !== 'popUpDiv' && targetJs !== 'dblCheckBtn') {\n      return;\n    } else if (Object.is(popUpDiv, e.target) || e.target.dataset.dblcheckbtn === 'false') {\n      popUpDiv.setAttribute('data-popUp', 'hidden');\n    } else if (btnProp === 'changePaid') {\n      let isPaid = target.paid;\n      changePaid(orderId, isPaid);\n    } else if (btnProp === 'deleteOne' || btnProp === 'deleteAll') {\n      deleteOrder(orderId, btnProp);\n    };\n  });\n};\n"]}